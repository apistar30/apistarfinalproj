{"ast":null,"code":"var _class;\nimport { EventEmitter } from \"@angular/core\";\nimport { Post } from \"./post.model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PostService {\n  constructor(http) {\n    this.http = http;\n    this.listChangedEvent = new EventEmitter();\n    this.listOfPosts = [\n      /*\n      new Post(\"TechCrunch\",\n      \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/techcrunch-website-homepage-1024x542.webp\",\n      \"TechCrunch is a blog that provides technology and startup news, from the latest developments in Silicon Valley to venture capital funding.\",\n      \"Johnny Johnny\",\n      new Date,\n      9\n      ),\n      new Post(\"Engadget\",\n      \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/the-verge-website-homepage.webp\",\n      \"The Verge’s website homepage is vibrant – a black and white theme with bright accents of orange and magenta.\",\n      \"Yes PAPA\",\n      new Date,\n      8\n      ),\n      new Post(\"The Verge\",\n      \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/engadget-website-homepage.webp\",\n      \"Launched by Peter Rojas, Engadget is a technology blog providing reviews of gadgets and consumer electronics as well as the latest news in the tech world.\",\n      \"Eating Sugar\",\n      new Date,\n      2\n      ),\n      */\n    ];\n  }\n  getPost() {\n    return this.listOfPosts;\n  }\n  deleteButton(index) {\n    // Delete the post from the local array\n    this.listOfPosts.splice(index, 1);\n    // Now delete the post from Firebase\n    this.http.delete(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`).subscribe(() => {\n      console.log('Post deleted from Firebase');\n    });\n    addPost(post, Post);\n    {\n      // Generate a unique key for the post\n      const key = this.http.post(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts.json`, post).pipe(map(response => response.name));\n      // Add the post to the listOfPosts array with the unique key\n      this.listOfPosts.push({\n        ...post,\n        key\n      });\n    }\n  }\n  updatePost(index, post) {\n    this.listOfPosts[index] = post;\n  }\n  getSpecPost(index) {\n    return this.listOfPosts[index];\n  }\n  likePost(index) {\n    this.listOfPosts[index].numberOfLikes++;\n    // Update the post in Firebase\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index]).subscribe(() => {\n      console.log('Post updated in Firebase');\n    });\n    //2.4\n  }\n\n  getComments(index) {\n    return this.listOfPosts[index].comments;\n  }\n  setPosts(listOfPosts) {\n    this.listOfPosts = listOfPosts;\n    this.listChangedEvent.emit(listOfPosts);\n  }\n  addComment(index, comment) {\n    this.listOfPosts[index].comments.push(comment);\n    // Update the post in Firebase\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index]).subscribe(() => {\n      console.log('Post updated in Firebase');\n    });\n  }\n  editComment(postIndex, commentIndex, newComment) {\n    this.listOfPosts[postIndex].comments[commentIndex] = newComment;\n    // Update the post in Firebase\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${postIndex}.json`, this.listOfPosts[postIndex]).subscribe(() => {\n      console.log('Comment updated in Firebase');\n    });\n  }\n  deleteComment(postIndex, commentIndex) {\n    this.listOfPosts[postIndex].comments.splice(commentIndex, 1);\n    // Update the post in Firebase\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${postIndex}.json`, this.listOfPosts[postIndex]).subscribe(() => {\n      console.log('Comment deleted from Firebase');\n    });\n  }\n  dislikePost(index) {\n    this.listOfPosts[index].numberOfDislikes++;\n    // Update the post in Firebase\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index]).subscribe(() => {\n      console.log('Post updated in Firebase');\n    });\n  }\n}\n_class = PostService;\n_class.ɵfac = function PostService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["EventEmitter","Post","PostService","constructor","http","listChangedEvent","listOfPosts","getPost","deleteButton","index","splice","delete","subscribe","console","log","addPost","post","key","pipe","map","response","name","push","updatePost","getSpecPost","likePost","numberOfLikes","put","getComments","comments","setPosts","emit","addComment","comment","editComment","postIndex","commentIndex","newComment","deleteComment","dislikePost","numberOfDislikes","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\gutie\\angularProjects\\crud\\src\\app\\post.service.ts"],"sourcesContent":["import { EventEmitter, Injectable } from \"@angular/core\";\r\nimport { Post } from \"./post.model\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PostService {\r\n  constructor(private http: HttpClient) { }\r\n  listChangedEvent: EventEmitter<Post[]> = new EventEmitter();\r\n  listOfPosts: Post[] = [\r\n        /*\r\n      new Post(\"TechCrunch\",\r\n        \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/techcrunch-website-homepage-1024x542.webp\",\r\n        \"TechCrunch is a blog that provides technology and startup news, from the latest developments in Silicon Valley to venture capital funding.\",\r\n        \"Johnny Johnny\",\r\n        new Date,\r\n        9\r\n      ),\r\n      new Post(\"Engadget\",\r\n        \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/the-verge-website-homepage.webp\",\r\n        \"The Verge’s website homepage is vibrant – a black and white theme with bright accents of orange and magenta.\",\r\n        \"Yes PAPA\",\r\n        new Date,\r\n        8\r\n      ),\r\n      new Post(\"The Verge\",\r\n        \"https://www.hostinger.com/tutorials/wp-content/uploads/sites/2/2021/12/engadget-website-homepage.webp\",\r\n        \"Launched by Peter Rojas, Engadget is a technology blog providing reviews of gadgets and consumer electronics as well as the latest news in the tech world.\",\r\n        \"Eating Sugar\",\r\n        new Date,\r\n        2\r\n      ),\r\n      */\r\n\r\n];\r\n\r\n  getPost() {\r\n    return this.listOfPosts;\r\n  }\r\n  deleteButton(index: number) {\r\n    // Delete the post from the local array\r\n    this.listOfPosts.splice(index, 1);\r\n  \r\n    // Now delete the post from Firebase\r\n    this.http.delete(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`).subscribe(() => {\r\n      console.log('Post deleted from Firebase');\r\n    });\r\n    addPost(post: Post) {\r\n      // Generate a unique key for the post\r\n      const key = this.http.post(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts.json`, post)\r\n        .pipe(map((response: { name: string }) => response.name));\r\n    \r\n      // Add the post to the listOfPosts array with the unique key\r\n      this.listOfPosts.push({ ...post, key });\r\n    }\r\n  }\r\n  updatePost(index: number, post: Post) {\r\n    this.listOfPosts[index] = post;\r\n  }\r\n  getSpecPost(index: number) {\r\n    return this.listOfPosts[index];\r\n  }\r\n  likePost(index: number) {\r\n    this.listOfPosts[index].numberOfLikes++;\r\n    \r\n    // Update the post in Firebase\r\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index])\r\n      .subscribe(() => {\r\n        console.log('Post updated in Firebase');\r\n      });\r\n      //2.4\r\n  \r\n  }\r\n  getComments(index: number) {\r\n    return this.listOfPosts[index].comments;\r\n  }\r\n  setPosts(listOfPosts: Post[]) {\r\n    this.listOfPosts = listOfPosts;\r\n    this.listChangedEvent.emit(listOfPosts);\r\n  }\r\n  addComment(index: number, comment: string) {\r\n    this.listOfPosts[index].comments.push(comment);\r\n    \r\n    // Update the post in Firebase\r\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index])\r\n      .subscribe(() => {\r\n        console.log('Post updated in Firebase');\r\n      });\r\n  }\r\n  \r\n  editComment(postIndex: number, commentIndex: number, newComment: string) {\r\n    this.listOfPosts[postIndex].comments[commentIndex] = newComment;\r\n  \r\n    // Update the post in Firebase\r\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${postIndex}.json`, this.listOfPosts[postIndex])\r\n      .subscribe(() => {\r\n        console.log('Comment updated in Firebase');\r\n      });\r\n  }\r\n  \r\n  deleteComment(postIndex: number, commentIndex: number) {\r\n    this.listOfPosts[postIndex].comments.splice(commentIndex, 1);\r\n  \r\n    // Update the post in Firebase\r\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${postIndex}.json`, this.listOfPosts[postIndex])\r\n      .subscribe(() => {\r\n        console.log('Comment deleted from Firebase');\r\n      });\r\n  }\r\n  dislikePost(index: number) {\r\n    this.listOfPosts[index].numberOfDislikes++;\r\n  \r\n    // Update the post in Firebase\r\n    this.http.put(`https://gutierrez-firebase-default-rtdb.asia-southeast1.firebasedatabase.app/posts/${index}.json`, this.listOfPosts[index])\r\n      .subscribe(() => {\r\n        console.log('Post updated in Firebase');\r\n      });\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}